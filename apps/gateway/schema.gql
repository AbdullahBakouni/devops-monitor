# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type FailurePredictionDto {
  id: String!
  probability: Float!
  reason: String
  service: String!
  timestamp: String!
  windowHours: Int!
}

type LogEntryDTO {
  host: String
  id: String!
  image: String
  level: String!
  message: String!
  namespace: String
  pod: String
  service: String!
  source: String
  spanId: String
  timestamp: String!
  traceId: String
}

input LogSearchFilter {
  cursor: String
  from: String
  level: String
  limit: Float
  q: String
  service: String
  to: String
}

type LogSearchResult {
  items: [LogEntryDTO!]!
  nextCursor: String
}

type MetricsAlertDTO {
  anomalyConfidence: Float!
  cluster: String!
  createdAt: String!
  expected: Float!
  message: String!
  metric: String!
  metricDisplayName: String!
  score: Float
  service: String!
  threshold: Float!
  title: String!
  type: String!
  value: Float!
}

type MetricsDTO {
  cpuUsage: Float!
  memoryUsage: Float!
  networkRx: Float!
  networkTx: Float!
  service: String!
  source: String!
  status: String!
  timestamp: String!
}

type Mutation {
  createServiceEvent(cluster: String!, eventType: String!, message: String, service: String!, status: String!): ServiceEvent!
}

type NotificationDTO {
  cluster: String
  createdAt: String!
  id: String!
  message: String!
  service: String!
  title: String!
  type: String!
}

type PredictionStatsDto {
  averageProbability: Float!
  highRisk: Int!
  lowRisk: Int!
  moderateRisk: Int!
  total: Int!
}

type Query {
  failurePredictions(limit: Float = 100, service: String, windowHours: Int): [FailurePredictionDto!]!
  getNotifications: [NotificationDTO!]!
  getServiceEvents: [ServiceEvent!]!
  latestPrediction(service: String!): FailurePredictionDto
  latestRCAReport(service: String!): RootCauseReportDto
  latestRisk(service: String!): ServiceRiskDto
  predictionStatistics: PredictionStatsDto!
  rcaReports(limit: Float = 50, minConfidence: Int, service: String): [RootCauseReportDto!]!
  rcaStatistics: RCAStatsDto!
  riskStatistics: RiskStatsDto!
  searchLogs(filter: LogSearchFilter): LogSearchResult!
  serviceRisks(limit: Float = 100, service: String): [ServiceRiskDto!]!
}

type RCAStatsDto {
  highConfidence: Int!
  lowConfidence: Int!
  mediumConfidence: Int!
  total: Int!
}

"""Risk level for a service"""
enum RiskLevel {
  CRITICAL
  NORMAL
  WARNING
}

type RiskStatsDto {
  critical: Int!
  normal: Int!
  total: Int!
  warning: Int!
}

type RootCauseReportDto {
  cause: String!
  confidence: Int!
  id: String!
  service: String!
  timestamp: String!
}

type ServiceEvent {
  cluster: String!
  createdAt: String!
  eventType: String!
  id: String!
  message: String
  service: String!
  status: String!
}

type ServiceRiskDto {
  id: String!
  level: RiskLevel!
  reason: String
  riskScore: Int!
  service: String!
  timestamp: String!
}

type Subscription {
  logCreated: LogEntryDTO!
  metricsAlert: MetricsAlertDTO!
  metricsUpdated: MetricsDTO!
  notificationCreated: NotificationDTO!
  predictionUpdated: FailurePredictionDto!
  rcaReportCreated: RootCauseReportDto!
  riskUpdated: ServiceRiskDto!
  serviceEventCreated(service: String, status: String): ServiceEvent!
}